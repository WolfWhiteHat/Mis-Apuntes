Realizamos un escaneo de nmap
![[Pasted image 20240628112649.png]]

Accedemos a la web y esto es lo primero que nos aparece
![[Pasted image 20240628112724.png]]

Interceptamos la peticion de la misma pagina con burpsuite
![[Pasted image 20240628113408.png]]

Si cambiamos el User-Agent y enviamos la peticion nos redirige a la siguiente pagina donde nos indican lo sigueinte
![[Pasted image 20240628113908.png]]

Nos indica que tiene una contraseña debil, ahora realizaremos un ataque de fuerza bruta con hdyra
![[Pasted image 20240628114612.png]]

Probamos a acceder y ya tenemos acceso por ftp
![[Pasted image 20240628114556.png]]

Revisamos los ficheros y nos los descargamos, podemos usar `mget *` para descargarnos todos los ficheros 
![[Pasted image 20240628114726.png]]

Revisamos el mensaje que hay en el fichero txt que nos indica que las contraseñas estan en las imagenes
![[Pasted image 20240628114810.png]]

Revisamos si tiene algun contenido con binwalk
```
binwalk cutie.png
```
![[Pasted image 20240628115207.png]]

Ahora podemos usar la herramienta `foremost` para extraer ficheros zip
```
foremost -i cutie.png -o extraer
```
![[Pasted image 20240628115503.png]]

Accedemos al fichero extraido y nos encontramos que dentro de la carpeta zip tenemos el fichero comprido y con contraseña
![[Pasted image 20240628115756.png]]

Con zip2john extraemos la información de hash de contraseñas almacenadas en archivos ZIP protegidos con contraseña
![[Pasted image 20240628120330.png]]

Descomprimimos el fichero con la contraseña crackeada
![[Pasted image 20240628120631.png]]

Leemos el fichero que nos ha extraido y contiene el siguiente mensaje
![[Pasted image 20240628120713.png]]

En este fichero tenemos la contraseña en base 64, la decodificamos y ya tenemos la password para extraer los metadatos de la otra imagen
![[Pasted image 20240628121146.png]]

Al escribir la contraseña ya obtenemos los metadatos
![[Pasted image 20240628121239.png]]

Leemos el fichero y obtenemos otra contraseña
![[Pasted image 20240628121303.png]]

Ahora accederemos por ssh al sistema con el usuario de james
![[Pasted image 20240628121720.png]]

Con Linpeas encontramos las siguientes vulnerabilidades
![[Pasted image 20240628123346.png]]

Revisamos la version de sudo y encontramos que es vulnerable
![[Pasted image 20240628122727.png]]

Este es el exploit
```
https://github.com/worawit/CVE-2021-3156
```
![[Pasted image 20240628123925.png]]

Nos descargamos el exploit y los transferimos a la maquina victima
![[Pasted image 20240628124201.png]]

Y al ejecutarlo ya obtenemos acceso a root
![[Pasted image 20240628124236.png]]

Obtención de la bandera de root
![[Pasted image 20240628124318.png]]
