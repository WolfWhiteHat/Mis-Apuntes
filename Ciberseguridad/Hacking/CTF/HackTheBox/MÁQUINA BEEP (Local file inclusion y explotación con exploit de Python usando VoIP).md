Lo primero será hacer los reconocimientos de siempre:
![[Mis apuntes/ANEXOS/pasted image 0.png]]
![[Mis apuntes/ANEXOS/pasted image 0 1.png]]
Vamos a entrar en la web desde el navegador:
![[Mis apuntes/ANEXOS/pasted image 0 2.png]]
Y si miramos en searchsploit que vulnerabilidades tenemos para elastix, veremos que tenemos un local file inclusion:
![[Mis apuntes/ANEXOS/pasted image 0 3.png]]
Vamos a examinar este exploit, donde vemos que se aprovecha de una vulnerabilidad de local file inclusion, lo que significa que podemos acceder a archivos locales de la máquina:
![[Mis apuntes/ANEXOS/pasted image 0 4.png]]
Vamos a copiar y pegar esa línea y probemos cómo funciona, y si lo pegamos en el navegador accedemos al archivo que queramos, que en mi caso lo modifiqué y puse para ver el fichero etc/passwd:
![[Mis apuntes/ANEXOS/pasted image 0 5.png]]
Pero lo interesante es acceder con el mismo comando del exploit, donde veremos que tenemos acceso a unas credenciales, donde presionamos CONTROL+U y veremos la información estructurada:
![[Mis apuntes/ANEXOS/pasted image 0 6.png]]
Ahora con estas credenciales podremos iniciar sesión en muchos sitios.

**EXPLOTACIÓN DE LA VULNERABILIDAD CON EXPLOIT**

Aún así vamos a entrar a la máquina explotando un exploit de searchsploit:
![[Mis apuntes/ANEXOS/pasted image 0 7.png]]
Descargamos este script y si vemos su contenido nos pide que modifiquemos unas cosas, tales como el local y remote host, así como el puerto que estaremos escuchando con netcat, aunque también nos pide la extensión, para obtener eso ejecutamos este comando poniendo la ip de la máquina víctima, instalando primero esto:

apt-get install sipvicious -y, ya que con sipvicious podremos saber la extensión VoIP de la máquina objetivo:
![[Mis apuntes/ANEXOS/pasted image 0 8.png]]
Y lo añadimos todo al exploit:
![[Mis apuntes/ANEXOS/pasted image 0 9.png]]
Ahora si lo ejecutamos nos da un error con una librería:
![[Mis apuntes/ANEXOS/pasted image 0 10.png]]
Por tanto debemos eliminar o comentar donde dice urllib y modificamos una línea donde se usaba esta librería y ponemos un print(url) en su lugar:
![[Mis apuntes/ANEXOS/pasted image 0 11.png]]
![[Mis apuntes/ANEXOS/pasted image 0 12.png]]
Una vez hecho todo esto, si lanzamos el exploit contra la ip de la víctima, veremos que nos proporciona un link:
![[Mis apuntes/ANEXOS/pasted image 0 13.png]]
Nos ponemos a escuchar con netcat:
![[Mis apuntes/ANEXOS/pasted image 0 14.png]]
Y ahora pegamos esa dirección en el navegador y ya tenemos acceso remoto:
![[Mis apuntes/ANEXOS/pasted image 0 15.png]]
Pero ahora tenemos una shell que no puede navegar por los directorios ni nada, pero sí podemos enviarnos una shell reversa mucho mejor con el comando de enviarnos la consola:
![[Mis apuntes/ANEXOS/pasted image 0 16.png]]
Y ahora escuchamos con netcat por otro puerto y ya recibimos la conexión con una bash mejorada:
![[Mis apuntes/ANEXOS/pasted image 0 17.png]]
Y ya tenemos la flag:
![[Mis apuntes/ANEXOS/pasted image 0 18.png]]
