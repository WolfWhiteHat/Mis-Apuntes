Hay varias formas de instalar Kali NetHunter en nuestro dispositivo Android, podemos hacerlo via termux, que es un emulador, desde los modulos de Magisk o modificando el kernel e instalando el sistema completo, estas son las comparaciones de instalarlo de las diferentes formas

# Comparación formas de instalacion de Kali
1. **Modificación del kernel (NetHunter completo)**:
• Acceso completo a funciones avanzadas como inyección de paquetes, adaptadores Wi-Fi, monitorización, etc.
• Requiere modificar el kernel, lo que implica riesgos de estabilidad.
• Funcionalidades avanzadas de pentesting a nivel de hardware.

2. **Módulos de Magisk**:
• Acceso a NetHunter sin modificar el kernel.
• Funcionalidades limitadas (sin inyección de paquetes, por ejemplo).
• Menos riesgo de dañar el sistema.

3. **Termux**:
• No requiere root (pero se puede usar con root).
• Limitado en funcionalidad en comparación con NetHunter, especialmente sin un kernel modificado.
• Ideal para tareas de pentesting más livianas o para desarrollo y scripting en un entorno Linux.

# Preparar Google pixel 7a
- Asegúrate de tener **LineageOS** ya instalado y funcionando correctamente en tu Google Pixel 7a.
- **Permitir la depuración USB**: Activa la depuración USB en tu dispositivo desde las **Opciones de desarrollador**.
- **ADB y fastboot**: Verifica que tienes instalados ADB y fastboot en tu Mac (esto ya lo hiciste al instalar LineageOS).

# Descargar Magisk
Descargamos el archivo `magisk` del repositorio de github y lo instalamos como una aplicación normal
```
https://github.com/topjohnwu/Magisk
```

# Rootaer Google Pixel 7a (init_boot_b)
Ahora transferiremos la imange de boot de LineageOS llamada `boot.img` para hacerlo seguiremos los siguientes pasos, primero conectamos el dispositivo al ordenador y lo verificamos
```
adb devices
```
![[Pasted image 20240910075001.png]]

Ahora extraemos el archivo `.zip` de LineageOS

Ahora extraemos el archivo  `payload.bin`  y con la herramienta `payload-dumper-go` extraemos los ficheros
![[Pasted image 20240911121244.png]]

Y con el siguiente comando enviamos el archivo a una de nuestras carpetas del dispositivo llamada `sdcard`
```
adb push init_boot.img /sdcard/
```
![[Pasted image 20240911121402.png]]

Y verificamos que se haya enviado
```
adb shelll ls /sdcard/
```
![[Pasted image 20240911121516.png]]

Ahora abrimos la aplicación de `Magisk` y seleccionamos **Install** → **Select and Patch a File**,
esto genenerar un archivo llamado `magisk_patched.img`

Una vez tenemos el fichero nos lo volvemos a transferir al mac con el siguiente comando
```
adb pull /sdcard/Download/magisk_patched-27000_r5nPS.img
```
![[Pasted image 20240911121603.png]]

# Flasehar Magisk_patched (init_boot_b)
Ahora para flashearlo primero tenemos que pasar el Google Pixel 7a en modo `bootloader`
```
adb reboot bootloader
```

Ahora flasheamos la imagen con el sigueinte comando
```
fastboot flash boot magisk_patched-27000_r5nPS.img
```
![[Pasted image 20240911121644.png]]

Y reiniciamos el dispositivo, esto `rooteara` nuestro dispositivo
```
fastboot reboot
```
![[Pasted image 20240911121702.png]]

# Instalación Kali NetHunter
https://www.youtube.com/watch?v=MoAAD0dXuaA


# Configurar escritorio Kali NetHunter
Para poder configurar el escritorio seguiremos los siguientes pasos, primero iremos al terminal y ejecutaremos el comando 
```
key start
```
![[Pasted image 20240913111400.png]]

Y ahora ejecutamos el siguiente comando para verificar que esta corriendo por el puerto 5901
```
netstat -an | grep 5901
```
![[Pasted image 20240913111508.png]]

En la aplicación de VNC configuramos el cliente para conectarnos
![[Pasted image 20240913111609.png|300]]



-------

# Reestablecer todas las particiones
**Acceder modod bootloader**
```
adb reboot bootloader 
```

**boot.img**: Contiene el kernel y el sistema de arranque inicial. Se utiliza para arrancar el sistema Android. **Es obligatorio.**
```
fastboot flash boot boot.img
```

**dtbo.img**: Contiene el dispositivo tree blob (DTB) que describe el hardware del dispositivo. **Es obligatorio.**
```
fastboot flash dtbo dtbo.img
```

**init_boot.img**: En dispositivos con Android 13, reemplaza el `recovery.img` tradicional y contiene el arranque inicial y el recovery. **Es obligatorio.**
```
fastboot flash init_boot init_boot.img
```

**super_empty.img**: Es la partición super vacía, útil para dispositivos con particiones dinámicas. **No es estrictamente necesario a menos que estés modificando particiones.**
```
fastboot flash super super_empty.img
```

**vbmeta.img**: Contiene los metadatos de verificación para la autenticidad del sistema. Necesario para dispositivos con verificación AVB (Android Verified Boot). **Es obligatorio.**
```
fastboot --disable-verity --disable-verification flash vbmeta vbmeta.img
```

**vendor_boot.img**: Contiene el kernel para la partición vendor, y es necesario para la compatibilidad del hardware del dispositivo. **Es obligatorio.**
```
fastboot flash vendor_boot vendor_boot.img
```

**vendor_kernel_boot.img**: Similar a `vendor_boot.img`, proporciona el kernel para componentes del vendor. **Es obligatorio.**
```
fastboot flash vendor_kernel_boot vendor_kernel_boot.img
```

**Reinciar sistema**
```
fastboot reboot
```


